<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Identificador de Dispositivo</title>
</head>
<body>
      <button class="btn btn-secondary" style="display: none;" disabled>Volver</button>
      <button id="btnRegistro" class="btn btn-primary" style="display: none;" disabled>Registrar</button>
  <h1>Bienvenido, <span id="nombre">Dispositivo desconocido</span></h1>
  <button id="asignarBtn">Asignar nombre personalizado</button>

  <script type="module">
    import {
      identificarDispositivo,
      asignarNombre,
      verificarSesion,
      iniciarSesion
    } from './Indicadores.js';

    document.addEventListener("DOMContentLoaded", async () => {
      const acceso = await verificarSesion();
      if (!acceso) {
        const ok = await iniciarSesion();
        if (!ok) return;
      }

      await identificarDispositivo();
      document.getElementById("asignarBtn").addEventListener("click", asignarNombre);
    });
  </script>
</body>
</html>